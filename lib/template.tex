\listfiles
\documentclass[11pt,twoside]{book}
\usepackage[a5paper]{geometry}
\usepackage{amsmath,amsthm,amssymb}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[francais]{babel}
\usepackage{lmodern}
\usepackage[upright,widespace]{fourier}
\usepackage{maths}
\usepackage{microtype}
\usepackage[shortlabels]{enumitem}
\usepackage{booktabs}
\usepackage[x11names]{xcolor}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{fancyhdr}

\usepackage[
  colorlinks=true,
  linkcolor=Blue4,
  urlcolor=Blue4,
  linktocpage=true,
  pdftitle={Éléments de théorie des groupes. Solutions des exercices.},
  pdfauthor={Éric Guirbal},
  pdfsubject={Mathématiques},
  pdfkeywords={théorie des groupes, groupe monogène, groupe cyclique, groupe
    diédral, groupe fini, theorèmes de Sylow, sous-groupe normal, action de
    groupe, suite de composition, groupe abélien, groupe libre},
  pdflang=fr-FR]{hyperref}

\pagecolor{[% page_color %]}
\color{[% text_color %]}

%%% En-têtes
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\chaptermark}[1]{%
  \markboth{\sffamily#1}{}}
\fancyhead[RE]{\sffamily Éléments de théorie des groupes. Solutions des exercices}
\fancyhead[LO]{\sffamily Chapitre \thechapter. \leftmark}
\fancyhead[RO,LE]{\thepage}
\renewcommand{\headrulewidth}{0pt}

%%% Chapitres
\titleformat{\chapter}[display]
  {\filcenter}
  {\textls[150]{\MakeUppercase{Chapitre\,\, \thechapter}}}
  {0.5pc}  
  {\LARGE\itshape}
  []
\titlespacing{\chapter}
  {0pt}
  {0ex}
  {10ex}

\renewcommand{\thechapter}{%                                                    
  \ifnum\value{chapter}=1
    premier%
  \else
    \Roman{chapter}%
  \fi
}

%%% Sommaire
\titlecontents{chapter}
  [0pc] % left
  {\addvspace{3pt}} % above
  {{\scshape Chapitre \thecontentslabel} / \itshape} % before with label
  {\scshape \thecontentslabel} % before without label
  {\titlerule*[0.5pc]{.}\contentspage} % filler and page
  [] % after

%%% Listes
\setlist[enumerate]{label=\alph*),leftmargin=*,widest=a}

%%% Environnements
\theoremstyle{definition}
\newtheorem{solution}{}
\theoremstyle{remark}
\newtheorem*{remarque}{Remarque}

\begin{document}
\renewcommand{\contentsname}{Sommaire}

\title{
  Éléments de théorie des groupes\\
  Solutions des exercices
}

\date{
  \small\today\\
  Commit:
  \href{https://github.com/ericguirbal/calais-theorie-des-groupes/tree/[% commit %]}{[% commit %]}
}
\author{Éric Guirbal}

\frontmatter
\maketitle

\pagestyle{fancy}

%%% état d'avancement du projet
[% INCLUDE avancement.tex %]

\tableofcontents

\mainmatter
\pagestyle{fancy}

[% FOREACH chapter IN chapters.keys.sort %]
\chapter{[% chapters.$chapter.title %]}
[% FOREACH solution IN chapters.$chapter.solutions.sort %]
[% num = solution.match('\d+-(\d+)') %]
\setcounter{solution}{[% num.0 - 1 %]}
\begin{solution}
  [% INCLUDE "$chapter/$solution" %]
\end{solution}
[% END %]
[% END %]

\backmatter

\bibliographystyle{alpha}
\bibliography{[% source_dir %]/bibliographie}
\nocite{*}
\end{document}

